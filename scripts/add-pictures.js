var _=e=>e.key==="Escape",E=e=>e.key==="Enter";var r=document.querySelector(".big-picture"),h=r.querySelector(".big-picture__img img"),D=r.querySelector(".likes-count"),R=r.querySelector(".social__caption"),v=r.querySelector(".social__comment-shown-count"),H=r.querySelector(".social__comment-total-count"),S=r.querySelector(".social__comments"),m=r.querySelector(".comments-loader"),l=[],i=0,x=0,k=({avatar:e,message:t,name:c})=>{let o=document.createElement("li");o.classList.add("social__comment"),o.innerHTML='<img class="social__picture"><p class="social__text"></p>';let n=o.querySelector(".social__picture");n.src=e.replace("img/","images/"),n.alt=c,n.width=35,n.height=35;let a=o.querySelector(".social__text");return a.textContent=t,o},I=()=>{i<x?m.classList.remove("hidden"):m.classList.add("hidden")},O=()=>{v.textContent=i},y=()=>{let e=document.createDocumentFragment();l.splice(0,5).forEach(t=>{e.append(k(t)),i++}),S.append(e),I(),O()},A=({likes:e,comments:t,url:c,description:o})=>{h.src=`images/${c}`,h.alt=o,D.textContent=e,R.textContent=o,H.textContent=t.length,l.length=0,i=0,l.push(...t.slice()),S.innerHTML="",x=t.length,y()};m.addEventListener("click",y);var p=document.querySelector(".big-picture"),T=p.querySelector(".cancel"),g=e=>{p.classList.remove("hidden"),document.body.classList.add("modal-open"),document.addEventListener("keydown",L),A(e)},u=()=>{p.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",L)};function L(e){_(e)&&(e.preventDefault(),u())}T.addEventListener("click",()=>{u()});T.addEventListener("keydown",e=>{E(e)&&u()});var C=document.querySelector(".pictures"),P=document.querySelector("#picture").content.querySelector(".picture"),d=[],b=()=>{document.querySelectorAll(".picture").forEach(e=>e.remove())},B=e=>{b(),d.length=0,d.push(...e.slice());let t=document.createDocumentFragment();e.forEach(({id:c,url:o,description:n,likes:a,comments:M})=>{let s=P.cloneNode(!0);s.querySelector(".picture__img").src=`images/${o}`,s.querySelector(".picture__img").alt=n,s.querySelector(".picture__likes").textContent=a,s.querySelector(".picture__comments").textContent=M.length,s.dataset.marker=c,t.appendChild(s)}),C.append(t)};C.addEventListener("click",e=>{let t=e.target.closest(".picture");if(t){let c=Number(t.dataset.marker),o=d.find(n=>n.id===c);g(o)}});export{B as getPhotoList};
