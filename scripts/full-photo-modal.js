var p=e=>e.key==="Escape",d=e=>e.key==="Enter";var n=document.querySelector(".big-picture"),u=n.querySelector(".big-picture__img img"),C=n.querySelector(".likes-count"),M=n.querySelector(".social__caption"),R=n.querySelector(".social__comment-shown-count"),N=n.querySelector(".social__comment-total-count"),E=n.querySelector(".social__comments"),a=n.querySelector(".comments-loader"),i=[],c=0,_=0,D=({avatar:e,message:o,name:r})=>{let t=document.createElement("li");t.classList.add("social__comment"),t.innerHTML='<img class="social__picture"><p class="social__text"></p>';let s=t.querySelector(".social__picture");s.src=e.replace("img/","images/"),s.alt=r,s.width=35,s.height=35;let T=t.querySelector(".social__text");return T.textContent=o,t},H=()=>{c<_?a.classList.remove("hidden"):a.classList.add("hidden")},f=()=>{R.textContent=c},x=()=>{let e=document.createDocumentFragment();i.splice(0,5).forEach(o=>{e.append(D(o)),c++}),E.append(e),H(),f()},A=({likes:e,comments:o,url:r,description:t})=>{u.src=`images/${r}`,u.alt=t,C.textContent=e,M.textContent=t,N.textContent=o.length,i.length=0,c=0,i.push(...o.slice()),E.innerHTML="",_=o.length,x()};a.addEventListener("click",x);var m=document.querySelector(".big-picture"),S=m.querySelector(".cancel"),w=e=>{m.classList.remove("hidden"),document.body.classList.add("modal-open"),document.addEventListener("keydown",h),A(e)},l=()=>{m.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",h)};function h(e){p(e)&&(e.preventDefault(),l())}S.addEventListener("click",()=>{l()});S.addEventListener("keydown",e=>{d(e)&&l()});export{w as openUserModal};
