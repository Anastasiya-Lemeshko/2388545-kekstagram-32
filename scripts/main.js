(function(s,f){typeof exports=="object"&&typeof module<"u"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(s=typeof globalThis<"u"?globalThis:s||self,f(s.noUiSlider={}))})(void 0,function(s){"use strict";s.PipsMode=void 0,function(t){t.Range="range",t.Steps="steps",t.Positions="positions",t.Count="count",t.Values="values"}(s.PipsMode||(s.PipsMode={})),s.PipsType=void 0,function(t){t[t.None=-1]="None",t[t.NoValue=0]="NoValue",t[t.LargeValue=1]="LargeValue",t[t.SmallValue=2]="SmallValue"}(s.PipsType||(s.PipsType={}));function f(t){return E(t)&&typeof t.from=="function"}function E(t){return typeof t=="object"&&typeof t.to=="function"}function b(t){t.parentElement.removeChild(t)}function k(t){return t!=null}function X(t){t.preventDefault()}function J(t){return t.filter(function(e){return this[e]?!1:this[e]=!0},{})}function te(t,e){return Math.round(t/e)*e}function He(t,e){var a=t.getBoundingClientRect(),d=t.ownerDocument,m=d.documentElement,A=P(d);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(A.x=0),e?a.top+A.y-m.clientTop:a.left+A.x-m.clientLeft}function Q(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function Te(t,e,a){a>0&&(N(t,e),setTimeout(function(){x(t,e)},a))}function ee(t){return Math.max(Math.min(t,100),0)}function ue(t){return Array.isArray(t)?t:[t]}function Y(t){t=String(t);var e=t.split(".");return e.length>1?e[1].length:0}function N(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function x(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function v(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function P(t){var e=window.pageXOffset!==void 0,a=(t.compatMode||"")==="CSS1Compat",d=e?window.pageXOffset:a?t.documentElement.scrollLeft:t.body.scrollLeft,m=e?window.pageYOffset:a?t.documentElement.scrollTop:t.body.scrollTop;return{x:d,y:m}}function h(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function ge(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch{}return t}function we(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function Ce(t,e){return 100/(e-t)}function Se(t,e,a){return e*100/(t[a+1]-t[a])}function De(t,e){return Se(t,t[0]<0?e+Math.abs(t[0]):e-t[0],0)}function Ie(t,e){return e*(t[1]-t[0])/100+t[0]}function fe(t,e){for(var a=1;t>=e[a];)a+=1;return a}function u(t,e,a){if(a>=t.slice(-1)[0])return 100;var d=fe(a,t),m=t[d-1],A=t[d],w=e[d-1],O=e[d];return w+De([m,A],a)/Ce(w,O)}function y(t,e,a){if(a>=100)return t.slice(-1)[0];var d=fe(a,e),m=t[d-1],A=t[d],w=e[d-1],O=e[d];return Ie([m,A],(a-w)*Ce(w,O))}function L(t,e,a,d){if(d===100)return d;var m=fe(d,t),A=t[m-1],w=t[m];return a?d-A>(w-A)/2?w:A:e[m-1]?t[m-1]+te(d-t[m-1],e[m-1]):d}var g=function(){function t(e,a,d){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[d||!1],this.xNumSteps=[!1],this.snap=a;var m,A=[];for(Object.keys(e).forEach(function(w){A.push([ue(e[w]),w])}),A.sort(function(w,O){return w[0][0]-O[0][0]}),m=0;m<A.length;m++)this.handleEntryPoint(A[m][1],A[m][0]);for(this.xNumSteps=this.xSteps.slice(0),m=0;m<this.xNumSteps.length;m++)this.handleStepPoint(m,this.xNumSteps[m])}return t.prototype.getDistance=function(e){for(var a=[],d=0;d<this.xNumSteps.length-1;d++)a[d]=Se(this.xVal,e,d);return a},t.prototype.getAbsoluteDistance=function(e,a,d){var m=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[m+1];)m++;else e===this.xPct[this.xPct.length-1]&&(m=this.xPct.length-2);!d&&e===this.xPct[m+1]&&m++,a===null&&(a=[]);var A,w=1,O=a[m],C=0,W=0,re=0,j=0;for(d?A=(e-this.xPct[m])/(this.xPct[m+1]-this.xPct[m]):A=(this.xPct[m+1]-e)/(this.xPct[m+1]-this.xPct[m]);O>0;)C=this.xPct[m+1+j]-this.xPct[m+j],a[m+j]*w+100-A*100>100?(W=C*A,w=(O-100*A)/a[m+j],A=1):(W=a[m+j]*C/100*w,w=0),d?(re=re-W,this.xPct.length+j>=1&&j--):(re=re+W,this.xPct.length-j>=1&&j++),O=a[m+j]*w;return e+re},t.prototype.toStepping=function(e){return e=u(this.xVal,this.xPct,e),e},t.prototype.fromStepping=function(e){return y(this.xVal,this.xPct,e)},t.prototype.getStep=function(e){return e=L(this.xPct,this.xSteps,this.snap,e),e},t.prototype.getDefaultStep=function(e,a,d){var m=fe(e,this.xPct);return(e===100||a&&e===this.xPct[m-1])&&(m=Math.max(m-1,1)),(this.xVal[m]-this.xVal[m-1])/d},t.prototype.getNearbySteps=function(e){var a=fe(e,this.xPct);return{stepBefore:{startValue:this.xVal[a-2],step:this.xNumSteps[a-2],highestStep:this.xHighestCompleteStep[a-2]},thisStep:{startValue:this.xVal[a-1],step:this.xNumSteps[a-1],highestStep:this.xHighestCompleteStep[a-1]},stepAfter:{startValue:this.xVal[a],step:this.xNumSteps[a],highestStep:this.xHighestCompleteStep[a]}}},t.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(Y);return Math.max.apply(null,e)},t.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},t.prototype.convert=function(e){return this.getStep(this.toStepping(e))},t.prototype.handleEntryPoint=function(e,a){var d;if(e==="min"?d=0:e==="max"?d=100:d=parseFloat(e),!Q(d)||!Q(a[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(d),this.xVal.push(a[0]);var m=Number(a[1]);d?this.xSteps.push(isNaN(m)?!1:m):isNaN(m)||(this.xSteps[0]=m),this.xHighestCompleteStep.push(0)},t.prototype.handleStepPoint=function(e,a){if(a){if(this.xVal[e]===this.xVal[e+1]){this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e];return}this.xSteps[e]=Se([this.xVal[e],this.xVal[e+1]],a,0)/Ce(this.xPct[e],this.xPct[e+1]);var d=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e],m=Math.ceil(Number(d.toFixed(3))-1),A=this.xVal[e]+this.xNumSteps[e]*m;this.xHighestCompleteStep[e]=A}},t}(),_={to:function(t){return t===void 0?"":t.toFixed(2)},from:Number},M={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},I={tooltips:".__tooltips",aria:".__aria"};function K(t,e){if(!Q(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function ne(t,e){if(!Q(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier=e}function Ee(t,e){if(!Q(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");t.keyboardMultiplier=e}function Ae(t,e){if(!Q(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep=e}function Tr(t,e){if(typeof e!="object"||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(e.min===void 0||e.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new g(e,t.snap||!1,t.singleStep)}function Dr(t,e){if(e=ue(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function kr(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");t.snap=e}function Mr(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");t.animate=e}function qr(t,e){if(typeof e!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");t.animationDuration=e}function Vr(t,e){var a=[!1],d;if(e==="lower"?e=[!0,!1]:e==="upper"&&(e=[!1,!0]),e===!0||e===!1){for(d=1;d<t.handles;d++)a.push(e);a.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");a=e}t.connect=a}function Or(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function Et(t,e){if(!Q(e))throw new Error("noUiSlider: 'margin' option must be numeric.");e!==0&&(t.margin=t.spectrum.getDistance(e))}function Rr(t,e){if(!Q(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getDistance(e),!t.limit||t.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function Fr(t,e){var a;if(!Q(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&!(e.length===2||Q(e[0])||Q(e[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(e!==0){for(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getDistance(e[0]),t.spectrum.getDistance(e[1])],a=0;a<t.spectrum.xNumSteps.length-1;a++)if(t.padding[0][a]<0||t.padding[1][a]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var d=e[0]+e[1],m=t.spectrum.xVal[0],A=t.spectrum.xVal[t.spectrum.xVal.length-1];if(d/(A-m)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function Ur(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function Nr(t,e){if(typeof e!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var a=e.indexOf("tap")>=0,d=e.indexOf("drag")>=0,m=e.indexOf("fixed")>=0,A=e.indexOf("snap")>=0,w=e.indexOf("hover")>=0,O=e.indexOf("unconstrained")>=0,C=e.indexOf("drag-all")>=0,W=e.indexOf("smooth-steps")>=0;if(m){if(t.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");Et(t,t.start[1]-t.start[0])}if(O&&(t.margin||t.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:a||A,drag:d,dragAll:C,smoothSteps:W,fixed:m,snap:A,hover:w,unconstrained:O}}function Hr(t,e){if(e!==!1)if(e===!0||E(e)){t.tooltips=[];for(var a=0;a<t.handles;a++)t.tooltips.push(e)}else{if(e=ue(e),e.length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");e.forEach(function(d){if(typeof d!="boolean"&&!E(d))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),t.tooltips=e}}function Ir(t,e){if(e.length!==t.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");t.handleAttributes=e}function zr(t,e){if(!E(e))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");t.ariaFormat=e}function jr(t,e){if(!f(e))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");t.format=e}function Br(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");t.keyboardSupport=e}function $r(t,e){t.documentElement=e}function Kr(t,e){if(typeof e!="string"&&e!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function Gr(t,e){if(typeof e!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof t.cssPrefix=="string"?(t.cssClasses={},Object.keys(e).forEach(function(a){t.cssClasses[a]=t.cssPrefix+e[a]})):t.cssClasses=e}function yt(t){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:_,format:_},a={step:{r:!1,t:K},keyboardPageMultiplier:{r:!1,t:ne},keyboardMultiplier:{r:!1,t:Ee},keyboardDefaultStep:{r:!1,t:Ae},start:{r:!0,t:Dr},connect:{r:!0,t:Vr},direction:{r:!0,t:Ur},snap:{r:!1,t:kr},animate:{r:!1,t:Mr},animationDuration:{r:!1,t:qr},range:{r:!0,t:Tr},orientation:{r:!1,t:Or},margin:{r:!1,t:Et},limit:{r:!1,t:Rr},padding:{r:!1,t:Fr},behaviour:{r:!0,t:Nr},ariaFormat:{r:!1,t:zr},format:{r:!1,t:jr},tooltips:{r:!1,t:Hr},keyboardSupport:{r:!0,t:Br},documentElement:{r:!1,t:$r},cssPrefix:{r:!0,t:Kr},cssClasses:{r:!0,t:Gr},handleAttributes:{r:!1,t:Ir}},d={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:M,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(a).forEach(function(C){if(!k(t[C])&&d[C]===void 0){if(a[C].r)throw new Error("noUiSlider: '"+C+"' is required.");return}a[C].t(e,k(t[C])?t[C]:d[C])}),e.pips=t.pips;var m=document.createElement("div"),A=m.style.msTransform!==void 0,w=m.style.transform!==void 0;e.transformRule=w?"transform":A?"msTransform":"webkitTransform";var O=[["left","top"],["right","bottom"]];return e.style=O[e.dir][e.ort],e}function Xr(t,e,a){var d=h(),m=we(),A=m&&ge(),w=t,O,C,W,re,j,T=e.spectrum,se=[],U=[],Z=[],ze=0,ie={},ye=t.ownerDocument,ke=e.documentElement||ye.documentElement,Me=ye.body,Yr=ye.dir==="rtl"||e.ort===1?0:100;function oe(r,n){var i=ye.createElement("div");return n&&N(i,n),r.appendChild(i),i}function Zr(r,n){var i=oe(r,e.cssClasses.origin),o=oe(i,e.cssClasses.handle);if(oe(o,e.cssClasses.touchArea),o.setAttribute("data-handle",String(n)),e.keyboardSupport&&(o.setAttribute("tabindex","0"),o.addEventListener("keydown",function(l){return dn(l,n)})),e.handleAttributes!==void 0){var c=e.handleAttributes[n];Object.keys(c).forEach(function(l){o.setAttribute(l,c[l])})}return o.setAttribute("role","slider"),o.setAttribute("aria-orientation",e.ort?"vertical":"horizontal"),n===0?N(o,e.cssClasses.handleLower):n===e.handles-1&&N(o,e.cssClasses.handleUpper),i}function bt(r,n){return n?oe(r,e.cssClasses.connect):!1}function Jr(r,n){var i=oe(n,e.cssClasses.connects);C=[],W=[],W.push(bt(i,r[0]));for(var o=0;o<e.handles;o++)C.push(Zr(n,o)),Z[o]=o,W.push(bt(i,r[o+1]))}function Qr(r){N(r,e.cssClasses.target),e.dir===0?N(r,e.cssClasses.ltr):N(r,e.cssClasses.rtl),e.ort===0?N(r,e.cssClasses.horizontal):N(r,e.cssClasses.vertical);var n=getComputedStyle(r).direction;return n==="rtl"?N(r,e.cssClasses.textDirectionRtl):N(r,e.cssClasses.textDirectionLtr),oe(r,e.cssClasses.base)}function en(r,n){return!e.tooltips||!e.tooltips[n]?!1:oe(r.firstChild,e.cssClasses.tooltip)}function xt(){return w.hasAttribute("disabled")}function je(r){var n=C[r];return n.hasAttribute("disabled")}function Be(){j&&(Le("update"+I.tooltips),j.forEach(function(r){r&&b(r)}),j=null)}function wt(){Be(),j=C.map(en),We("update"+I.tooltips,function(r,n,i){if(!(!j||!e.tooltips)&&j[n]!==!1){var o=r[n];e.tooltips[n]!==!0&&(o=e.tooltips[n].to(i[n])),j[n].innerHTML=o}})}function tn(){Le("update"+I.aria),We("update"+I.aria,function(r,n,i,o,c){Z.forEach(function(l){var S=C[l],p=qe(U,l,0,!0,!0,!0),V=qe(U,l,100,!0,!0,!0),q=c[l],R=String(e.ariaFormat.to(i[l]));p=T.fromStepping(p).toFixed(1),V=T.fromStepping(V).toFixed(1),q=T.fromStepping(q).toFixed(1),S.children[0].setAttribute("aria-valuemin",p),S.children[0].setAttribute("aria-valuemax",V),S.children[0].setAttribute("aria-valuenow",q),S.children[0].setAttribute("aria-valuetext",R)})})}function rn(r){if(r.mode===s.PipsMode.Range||r.mode===s.PipsMode.Steps)return T.xVal;if(r.mode===s.PipsMode.Count){if(r.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var n=r.values-1,i=100/n,o=[];n--;)o[n]=n*i;return o.push(100),Ct(o,r.stepped)}return r.mode===s.PipsMode.Positions?Ct(r.values,r.stepped):r.mode===s.PipsMode.Values?r.stepped?r.values.map(function(c){return T.fromStepping(T.getStep(T.toStepping(c)))}):r.values:[]}function Ct(r,n){return r.map(function(i){return T.fromStepping(n?T.getStep(i):i)})}function nn(r){function n(q,R){return Number((q+R).toFixed(7))}var i=rn(r),o={},c=T.xVal[0],l=T.xVal[T.xVal.length-1],S=!1,p=!1,V=0;return i=J(i.slice().sort(function(q,R){return q-R})),i[0]!==c&&(i.unshift(c),S=!0),i[i.length-1]!==l&&(i.push(l),p=!0),i.forEach(function(q,R){var F,D,z,G=q,B=i[R+1],$,Je,Qe,et,Vt,tt,Ot,Rt=r.mode===s.PipsMode.Steps;for(Rt&&(F=T.xNumSteps[R]),F||(F=B-G),B===void 0&&(B=G),F=Math.max(F,1e-7),D=G;D<=B;D=n(D,F)){for($=T.toStepping(D),Je=$-V,Vt=Je/(r.density||1),tt=Math.round(Vt),Ot=Je/tt,z=1;z<=tt;z+=1)Qe=V+z*Ot,o[Qe.toFixed(5)]=[T.fromStepping(Qe),0];et=i.indexOf(D)>-1?s.PipsType.LargeValue:Rt?s.PipsType.SmallValue:s.PipsType.NoValue,!R&&S&&D!==B&&(et=0),D===B&&p||(o[$.toFixed(5)]=[D,et]),V=$}}),o}function sn(r,n,i){var o,c,l=ye.createElement("div"),S=(o={},o[s.PipsType.None]="",o[s.PipsType.NoValue]=e.cssClasses.valueNormal,o[s.PipsType.LargeValue]=e.cssClasses.valueLarge,o[s.PipsType.SmallValue]=e.cssClasses.valueSub,o),p=(c={},c[s.PipsType.None]="",c[s.PipsType.NoValue]=e.cssClasses.markerNormal,c[s.PipsType.LargeValue]=e.cssClasses.markerLarge,c[s.PipsType.SmallValue]=e.cssClasses.markerSub,c),V=[e.cssClasses.valueHorizontal,e.cssClasses.valueVertical],q=[e.cssClasses.markerHorizontal,e.cssClasses.markerVertical];N(l,e.cssClasses.pips),N(l,e.ort===0?e.cssClasses.pipsHorizontal:e.cssClasses.pipsVertical);function R(D,z){var G=z===e.cssClasses.value,B=G?V:q,$=G?S:p;return z+" "+B[e.ort]+" "+$[D]}function F(D,z,G){if(G=n?n(z,G):G,G!==s.PipsType.None){var B=oe(l,!1);B.className=R(G,e.cssClasses.marker),B.style[e.style]=D+"%",G>s.PipsType.NoValue&&(B=oe(l,!1),B.className=R(G,e.cssClasses.value),B.setAttribute("data-value",String(z)),B.style[e.style]=D+"%",B.innerHTML=String(i.to(z)))}}return Object.keys(r).forEach(function(D){F(D,r[D][0],r[D][1])}),l}function $e(){re&&(b(re),re=null)}function Ke(r){$e();var n=nn(r),i=r.filter,o=r.format||{to:function(c){return String(Math.round(c))}};return re=w.appendChild(sn(n,i,o)),re}function At(){var r=O.getBoundingClientRect(),n="offset"+["Width","Height"][e.ort];return e.ort===0?r.width||O[n]:r.height||O[n]}function de(r,n,i,o){var c=function(S){var p=on(S,o.pageOffset,o.target||n);if(!p||xt()&&!o.doNotReject||v(w,e.cssClasses.tap)&&!o.doNotReject||r===d.start&&p.buttons!==void 0&&p.buttons>1||o.hover&&p.buttons)return!1;A||p.preventDefault(),p.calcPoint=p.points[e.ort],i(p,o)},l=[];return r.split(" ").forEach(function(S){n.addEventListener(S,c,A?{passive:!0}:!1),l.push([S,c])}),l}function on(r,n,i){var o=r.type.indexOf("touch")===0,c=r.type.indexOf("mouse")===0,l=r.type.indexOf("pointer")===0,S=0,p=0;if(r.type.indexOf("MSPointer")===0&&(l=!0),r.type==="mousedown"&&!r.buttons&&!r.touches)return!1;if(o){var V=function(F){var D=F.target;return D===i||i.contains(D)||r.composed&&r.composedPath().shift()===i};if(r.type==="touchstart"){var q=Array.prototype.filter.call(r.touches,V);if(q.length>1)return!1;S=q[0].pageX,p=q[0].pageY}else{var R=Array.prototype.find.call(r.changedTouches,V);if(!R)return!1;S=R.pageX,p=R.pageY}}return n=n||P(ye),(c||l)&&(S=r.clientX+n.x,p=r.clientY+n.y),r.pageOffset=n,r.points=[S,p],r.cursor=c||l,r}function Lt(r){var n=r-He(O,e.ort),i=n*100/At();return i=ee(i),e.dir?100-i:i}function an(r){var n=100,i=!1;return C.forEach(function(o,c){if(!je(c)){var l=U[c],S=Math.abs(l-r),p=S===100&&n===100,V=S<n,q=S<=n&&r>l;(V||q||p)&&(i=c,n=S)}}),i}function ln(r,n){r.type==="mouseout"&&r.target.nodeName==="HTML"&&r.relatedTarget===null&&Ge(r,n)}function cn(r,n){if(navigator.appVersion.indexOf("MSIE 9")===-1&&r.buttons===0&&n.buttonsProperty!==0)return Ge(r,n);var i=(e.dir?-1:1)*(r.calcPoint-n.startCalcPoint),o=i*100/n.baseSize;Pt(i>0,o,n.locations,n.handleNumbers,n.connect)}function Ge(r,n){n.handle&&(x(n.handle,e.cssClasses.active),ze-=1),n.listeners.forEach(function(i){ke.removeEventListener(i[0],i[1])}),ze===0&&(x(w,e.cssClasses.drag),Ze(),r.cursor&&(Me.style.cursor="",Me.removeEventListener("selectstart",X))),e.events.smoothSteps&&(n.handleNumbers.forEach(function(i){me(i,U[i],!0,!0,!1,!1)}),n.handleNumbers.forEach(function(i){H("update",i)})),n.handleNumbers.forEach(function(i){H("change",i),H("set",i),H("end",i)})}function Xe(r,n){if(!n.handleNumbers.some(je)){var i;if(n.handleNumbers.length===1){var o=C[n.handleNumbers[0]];i=o.children[0],ze+=1,N(i,e.cssClasses.active)}r.stopPropagation();var c=[],l=de(d.move,ke,cn,{target:r.target,handle:i,connect:n.connect,listeners:c,startCalcPoint:r.calcPoint,baseSize:At(),pageOffset:r.pageOffset,handleNumbers:n.handleNumbers,buttonsProperty:r.buttons,locations:U.slice()}),S=de(d.end,ke,Ge,{target:r.target,handle:i,listeners:c,doNotReject:!0,handleNumbers:n.handleNumbers}),p=de("mouseout",ke,ln,{target:r.target,handle:i,listeners:c,doNotReject:!0,handleNumbers:n.handleNumbers});c.push.apply(c,l.concat(S,p)),r.cursor&&(Me.style.cursor=getComputedStyle(r.target).cursor,C.length>1&&N(w,e.cssClasses.drag),Me.addEventListener("selectstart",X,!1)),n.handleNumbers.forEach(function(V){H("start",V)})}}function un(r){r.stopPropagation();var n=Lt(r.calcPoint),i=an(n);i!==!1&&(e.events.snap||Te(w,e.cssClasses.tap,e.animationDuration),me(i,n,!0,!0),Ze(),H("slide",i,!0),H("update",i,!0),e.events.snap?Xe(r,{handleNumbers:[i]}):(H("change",i,!0),H("set",i,!0)))}function fn(r){var n=Lt(r.calcPoint),i=T.getStep(n),o=T.fromStepping(i);Object.keys(ie).forEach(function(c){c.split(".")[0]==="hover"&&ie[c].forEach(function(l){l.call(Oe,o)})})}function dn(r,n){if(xt()||je(n))return!1;var i=["Left","Right"],o=["Down","Up"],c=["PageDown","PageUp"],l=["Home","End"];e.dir&&!e.ort?i.reverse():e.ort&&!e.dir&&(o.reverse(),c.reverse());var S=r.key.replace("Arrow",""),p=S===c[0],V=S===c[1],q=S===o[0]||S===i[0]||p,R=S===o[1]||S===i[1]||V,F=S===l[0],D=S===l[1];if(!q&&!R&&!F&&!D)return!0;r.preventDefault();var z;if(R||q){var G=q?0:1,B=qt(n),$=B[G];if($===null)return!1;$===!1&&($=T.getDefaultStep(U[n],q,e.keyboardDefaultStep)),V||p?$*=e.keyboardPageMultiplier:$*=e.keyboardMultiplier,$=Math.max($,1e-7),$=(q?-1:1)*$,z=se[n]+$}else D?z=e.spectrum.xVal[e.spectrum.xVal.length-1]:z=e.spectrum.xVal[0];return me(n,T.toStepping(z),!0,!0),H("slide",n),H("update",n),H("change",n),H("set",n),!1}function mn(r){r.fixed||C.forEach(function(n,i){de(d.start,n.children[0],Xe,{handleNumbers:[i]})}),r.tap&&de(d.start,O,un,{}),r.hover&&de(d.move,O,fn,{hover:!0}),r.drag&&W.forEach(function(n,i){if(!(n===!1||i===0||i===W.length-1)){var o=C[i-1],c=C[i],l=[n],S=[o,c],p=[i-1,i];N(n,e.cssClasses.draggable),r.fixed&&(l.push(o.children[0]),l.push(c.children[0])),r.dragAll&&(S=C,p=Z),l.forEach(function(V){de(d.start,V,Xe,{handles:S,handleNumbers:p,connect:n})})}})}function We(r,n){ie[r]=ie[r]||[],ie[r].push(n),r.split(".")[0]==="update"&&C.forEach(function(i,o){H("update",o)})}function pn(r){return r===I.aria||r===I.tooltips}function Le(r){var n=r&&r.split(".")[0],i=n?r.substring(n.length):r;Object.keys(ie).forEach(function(o){var c=o.split(".")[0],l=o.substring(c.length);(!n||n===c)&&(!i||i===l)&&(!pn(l)||i===l)&&delete ie[o]})}function H(r,n,i){Object.keys(ie).forEach(function(o){var c=o.split(".")[0];r===c&&ie[o].forEach(function(l){l.call(Oe,se.map(e.format.to),n,se.slice(),i||!1,U.slice(),Oe)})})}function qe(r,n,i,o,c,l,S){var p;return C.length>1&&!e.events.unconstrained&&(o&&n>0&&(p=T.getAbsoluteDistance(r[n-1],e.margin,!1),i=Math.max(i,p)),c&&n<C.length-1&&(p=T.getAbsoluteDistance(r[n+1],e.margin,!0),i=Math.min(i,p))),C.length>1&&e.limit&&(o&&n>0&&(p=T.getAbsoluteDistance(r[n-1],e.limit,!1),i=Math.min(i,p)),c&&n<C.length-1&&(p=T.getAbsoluteDistance(r[n+1],e.limit,!0),i=Math.max(i,p))),e.padding&&(n===0&&(p=T.getAbsoluteDistance(0,e.padding[0],!1),i=Math.max(i,p)),n===C.length-1&&(p=T.getAbsoluteDistance(100,e.padding[1],!0),i=Math.min(i,p))),S||(i=T.getStep(i)),i=ee(i),i===r[n]&&!l?!1:i}function Ye(r,n){var i=e.ort;return(i?n:r)+", "+(i?r:n)}function Pt(r,n,i,o,c){var l=i.slice(),S=o[0],p=e.events.smoothSteps,V=[!r,r],q=[r,!r];o=o.slice(),r&&o.reverse(),o.length>1?o.forEach(function(F,D){var z=qe(l,F,l[F]+n,V[D],q[D],!1,p);z===!1?n=0:(n=z-l[F],l[F]=z)}):V=q=[!0];var R=!1;o.forEach(function(F,D){R=me(F,i[F]+n,V[D],q[D],!1,p)||R}),R&&(o.forEach(function(F){H("update",F),H("slide",F)}),c!=null&&H("drag",S))}function Tt(r,n){return e.dir?100-r-n:r}function hn(r,n){U[r]=n,se[r]=T.fromStepping(n);var i=Tt(n,0)-Yr,o="translate("+Ye(i+"%","0")+")";C[r].style[e.transformRule]=o,Dt(r),Dt(r+1)}function Ze(){Z.forEach(function(r){var n=U[r]>50?-1:1,i=3+(C.length+n*r);C[r].style.zIndex=String(i)})}function me(r,n,i,o,c,l){return c||(n=qe(U,r,n,i,o,!1,l)),n===!1?!1:(hn(r,n),!0)}function Dt(r){if(W[r]){var n=0,i=100;r!==0&&(n=U[r-1]),r!==W.length-1&&(i=U[r]);var o=i-n,c="translate("+Ye(Tt(n,o)+"%","0")+")",l="scale("+Ye(o/100,"1")+")";W[r].style[e.transformRule]=c+" "+l}}function kt(r,n){return r===null||r===!1||r===void 0||(typeof r=="number"&&(r=String(r)),r=e.format.from(r),r!==!1&&(r=T.toStepping(r)),r===!1||isNaN(r))?U[n]:r}function Ve(r,n,i){var o=ue(r),c=U[0]===void 0;n=n===void 0?!0:n,e.animate&&!c&&Te(w,e.cssClasses.tap,e.animationDuration),Z.forEach(function(p){me(p,kt(o[p],p),!0,!1,i)});var l=Z.length===1?0:1;if(c&&T.hasNoSize()&&(i=!0,U[0]=0,Z.length>1)){var S=100/(Z.length-1);Z.forEach(function(p){U[p]=p*S})}for(;l<Z.length;++l)Z.forEach(function(p){me(p,U[p],!0,!0,i)});Ze(),Z.forEach(function(p){H("update",p),o[p]!==null&&n&&H("set",p)})}function vn(r){Ve(e.start,r)}function gn(r,n,i,o){if(r=Number(r),!(r>=0&&r<Z.length))throw new Error("noUiSlider: invalid handle number, got: "+r);me(r,kt(n,r),!0,!0,o),H("update",r),i&&H("set",r)}function Mt(r){if(r===void 0&&(r=!1),r)return se.length===1?se[0]:se.slice(0);var n=se.map(e.format.to);return n.length===1?n[0]:n}function Sn(){for(Le(I.aria),Le(I.tooltips),Object.keys(e.cssClasses).forEach(function(r){x(w,e.cssClasses[r])});w.firstChild;)w.removeChild(w.firstChild);delete w.noUiSlider}function qt(r){var n=U[r],i=T.getNearbySteps(n),o=se[r],c=i.thisStep.step,l=null;if(e.snap)return[o-i.stepBefore.startValue||null,i.stepAfter.startValue-o||null];c!==!1&&o+c>i.stepAfter.startValue&&(c=i.stepAfter.startValue-o),o>i.thisStep.startValue?l=i.thisStep.step:i.stepBefore.step===!1?l=!1:l=o-i.stepBefore.highestStep,n===100?c=null:n===0&&(l=null);var S=T.countStepDecimals();return c!==null&&c!==!1&&(c=Number(c.toFixed(S))),l!==null&&l!==!1&&(l=Number(l.toFixed(S))),[l,c]}function En(){return Z.map(qt)}function yn(r,n){var i=Mt(),o=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];o.forEach(function(l){r[l]!==void 0&&(a[l]=r[l])});var c=yt(a);o.forEach(function(l){r[l]!==void 0&&(e[l]=c[l])}),T=c.spectrum,e.margin=c.margin,e.limit=c.limit,e.padding=c.padding,e.pips?Ke(e.pips):$e(),e.tooltips?wt():Be(),U=[],Ve(k(r.start)?r.start:i,n)}function _n(){O=Qr(w),Jr(e.connect,O),mn(e.events),Ve(e.start),e.pips&&Ke(e.pips),e.tooltips&&wt(),tn()}_n();var Oe={destroy:Sn,steps:En,on:We,off:Le,get:Mt,set:Ve,setHandle:gn,reset:vn,__moveHandles:function(r,n,i){Pt(r,n,U,i)},options:a,updateOptions:yn,target:w,removePips:$e,removeTooltips:Be,getPositions:function(){return U.slice()},getTooltips:function(){return j},getOrigins:function(){return C},pips:Ke};return Oe}function _t(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var a=yt(e),d=Xr(t,a,e);return t.noUiSlider=d,d}var Wr={__spectrum:g,cssClasses:M,create:_t};s.create=_t,s.cssClasses=M,s.default=Wr,Object.defineProperty(s,"__esModule",{value:!0})});(function(s,f){typeof exports=="object"&&typeof module<"u"?module.exports=f():typeof define=="function"&&define.amd?define(f):(s=typeof globalThis<"u"?globalThis:s||self,s.Pristine=f())})(void 0,function(){"use strict";var s={en:{required:"This field is required",email:"This field requires a valid e-mail address",number:"This field requires a number",integer:"This field requires an integer value",url:"This field requires a valid website URL",tel:"This field requires a valid telephone number",maxlength:"This fields length must be < ${1}",minlength:"This fields length must be > ${1}",min:"Minimum value for this field is ${1}",max:"Maximum value for this field is ${1}",pattern:"Please match the requested format",equals:"The two fields do not match",default:"Please enter a correct value"}};function f(x,v){for(;(x=x.parentElement)&&!x.classList.contains(v););return x}function E(x){var v=arguments;return this.replace(/\${([^{}]*)}/g,function(P,h){return v[h]})}function b(x){return x.pristine.self.form.querySelectorAll('input[name="'+x.getAttribute("name")+'"]:checked').length}function k(x,v){for(var P in v)P in x||(x[P]=v[P]);return x}var X={classTo:"form-group",errorClass:"has-danger",successClass:"has-success",errorTextParent:"form-group",errorTextTag:"div",errorTextClass:"text-help"},J="pristine-error",te="input:not([type^=hidden]):not([type^=submit]), select, textarea",He=["required","min","max","minlength","maxlength","pattern"],Q=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Te=/-message(?:-([a-z]{2}(?:_[A-Z]{2})?))?/,ee="en",ue={},Y=function(v,P){P.name=v,P.priority===void 0&&(P.priority=1),ue[v]=P};Y("text",{fn:function(v){return!0},priority:0}),Y("required",{fn:function(v){return this.type==="radio"||this.type==="checkbox"?b(this):v!==void 0&&v.trim()!==""},priority:99,halt:!0}),Y("email",{fn:function(v){return!v||Q.test(v)}}),Y("number",{fn:function(v){return!v||!isNaN(parseFloat(v))},priority:2}),Y("integer",{fn:function(v){return!v||/^\d+$/.test(v)}}),Y("minlength",{fn:function(v,P){return!v||v.length>=parseInt(P)}}),Y("maxlength",{fn:function(v,P){return!v||v.length<=parseInt(P)}}),Y("min",{fn:function(v,P){return!v||(this.type==="checkbox"?b(this)>=parseInt(P):parseFloat(v)>=parseFloat(P))}}),Y("max",{fn:function(v,P){return!v||(this.type==="checkbox"?b(this)<=parseInt(P):parseFloat(v)<=parseFloat(P))}}),Y("pattern",{fn:function(v,P){var h=P.match(new RegExp("^/(.*?)/([gimy]*)$"));return!v||new RegExp(h[1],h[2]).test(v)}}),Y("equals",{fn:function(v,P){var h=document.querySelector(P);return h&&(!v&&!h.value||h.value===v)}});function N(x,v,P){var h=this;ge(x,v,P);function ge(u,y,L){u.setAttribute("novalidate","true"),h.form=u,h.config=k(y||{},X),h.live=L!==!1,h.fields=Array.from(u.querySelectorAll(te)).map(function(g){var _=[],M={},I={};return[].forEach.call(g.attributes,function(K){if(/^data-pristine-/.test(K.name)){var ne=K.name.substr(14),Ee=ne.match(Te);if(Ee!==null){var Ae=Ee[1]===void 0?"en":Ee[1];I.hasOwnProperty(Ae)||(I[Ae]={}),I[Ae][ne.slice(0,ne.length-Ee[0].length)]=K.value;return}ne==="type"&&(ne=K.value),we(_,M,ne,K.value)}else~He.indexOf(K.name)?we(_,M,K.name,K.value):K.name==="type"&&we(_,M,K.value)}),_.sort(function(K,ne){return ne.priority-K.priority}),h.live&&g.addEventListener(~["radio","checkbox"].indexOf(g.getAttribute("type"))?"change":"input",function(K){h.validate(K.target)}.bind(h)),g.pristine={input:g,validators:_,params:M,messages:I,self:h}}.bind(h))}function we(u,y,L,g){var _=ue[L];if(_&&(u.push(_),g)){var M=L==="pattern"?[g]:g.split(",");M.unshift(null),y[L]=M}}h.validate=function(u,y){y=u&&y===!0||u===!0;var L=h.fields;u!==!0&&u!==!1&&(u instanceof HTMLElement?L=[u.pristine]:(u instanceof NodeList||u instanceof(window.$||Array)||u instanceof Array)&&(L=Array.from(u).map(function(I){return I.pristine})));for(var g=!0,_=0;L[_];_++){var M=L[_];Ce(M)?!y&&fe(M):(g=!1,!y&&De(M))}return g},h.getErrors=function(u){if(!u){for(var y=[],L=0;L<h.fields.length;L++){var g=h.fields[L];g.errors.length&&y.push({input:g.input,errors:g.errors})}return y}return u.tagName&&u.tagName.toLowerCase()==="select"?u.pristine.errors:u.length?u[0].pristine.errors:u.pristine.errors};function Ce(u){for(var y=[],L=!0,g=0;u.validators[g];g++){var _=u.validators[g],M=u.params[_.name]?u.params[_.name]:[];if(M[0]=u.input.value,!_.fn.apply(u.input,M)&&(L=!1,typeof _.msg=="function"?y.push(_.msg(u.input.value,M)):typeof _.msg=="string"?y.push(E.apply(_.msg,M)):_.msg===Object(_.msg)&&_.msg[ee]?y.push(E.apply(_.msg[ee],M)):u.messages[ee]&&u.messages[ee][_.name]?y.push(E.apply(u.messages[ee][_.name],M)):s[ee]&&s[ee][_.name]?y.push(E.apply(s[ee][_.name],M)):y.push(E.apply(s[ee].default,M)),_.halt===!0))break}return u.errors=y,L}h.addValidator=function(u,y,L,g,_){u instanceof HTMLElement?(u.pristine.validators.push({fn:y,msg:L,priority:g,halt:_}),u.pristine.validators.sort(function(M,I){return I.priority-M.priority})):console.warn("The parameter elem must be a dom element")};function Se(u){if(u.errorElements)return u.errorElements;var y=f(u.input,h.config.classTo),L=null,g=null;return h.config.classTo===h.config.errorTextParent?L=y:L=y.querySelector("."+h.config.errorTextParent),L&&(g=L.querySelector("."+J),g||(g=document.createElement(h.config.errorTextTag),g.className=J+" "+h.config.errorTextClass,L.appendChild(g),g.pristineDisplay=g.style.display)),u.errorElements=[y,g]}function De(u){var y=Se(u),L=y[0],g=y[1],_=u.input,M=_.id||Math.floor(new Date().valueOf()*Math.random()),I="error-"+M;L&&(L.classList.remove(h.config.successClass),L.classList.add(h.config.errorClass),_.setAttribute("aria-describedby",I),_.setAttribute("aria-invalid","true")),g&&(g.setAttribute("id",I),g.setAttribute("role","alert"),g.innerHTML=u.errors.join("<br/>"),g.style.display=g.pristineDisplay||"")}h.addError=function(u,y){u=u.length?u[0]:u,u.pristine.errors.push(y),De(u.pristine)};function Ie(u){var y=Se(u),L=y[0],g=y[1],_=u.input;return L&&(L.classList.remove(h.config.errorClass),L.classList.remove(h.config.successClass),_.removeAttribute("aria-describedby"),_.removeAttribute("aria-invalid")),g&&(g.removeAttribute("id"),g.removeAttribute("role"),g.innerHTML="",g.style.display="none"),y}function fe(u){var y=Ie(u)[0];y&&y.classList.add(h.config.successClass)}return h.reset=function(){for(var u=0;h.fields[u];u++)h.fields[u].errorElements=null;Array.from(h.form.querySelectorAll("."+J)).map(function(y){y.parentNode.removeChild(y)}),Array.from(h.form.querySelectorAll("."+h.config.classTo)).map(function(y){y.classList.remove(h.config.successClass),y.classList.remove(h.config.errorClass)})},h.destroy=function(){h.reset(),h.fields.forEach(function(u){delete u.input.pristine}),h.fields=[]},h.setGlobalConfig=function(u){X=u},h}return N.addValidator=function(x,v,P,h,ge){Y(x,{fn:v,msg:P,priority:h,halt:ge})},N.addMessages=function(x,v){var P=s.hasOwnProperty(x)?s[x]:s[x]={};Object.keys(v).forEach(function(h,ge){P[h]=v[h]})},N.setLocale=function(x){ee=x},N});var bn=(s,f)=>{let E=Math.ceil(Math.min(s,f)),b=Math.floor(Math.max(s,f)),k=Math.random()*(b-E+1)+E;return Math.floor(k)},Ft=s=>s[bn(0,s.length-1)],ae=s=>s.key==="Escape",Ut=s=>s.key==="Enter",Nt=(s,f=500)=>{let E;return(...b)=>{clearTimeout(E),E=setTimeout(()=>s.apply(void 0,b),f)}};var Ht=/^#[a-zа-яё0-9]{1,19}$/i,It=/\s+/g;var le={none:{name:"none",style:" ",min:0,max:100,step:1,unit:""},chrome:{name:"chrome",style:"grayscale",min:0,max:1,step:.1,unit:""},sepia:{name:"sepia",style:"sepia",min:0,max:1,step:.1,unit:""},marvin:{name:"marvin",style:"invert",min:0,max:100,step:1,unit:"%"},phobos:{name:"phobos",style:"blur",min:0,max:3,step:.1,unit:"px"},heat:{name:"heat",style:"brightness",min:1,max:3,step:.1,unit:""}},rt="https://32.javascript.htmlacademy.pro/kekstagram",nt={GET_DATA:"/data",SEND_DATA:"/"},st={IDLE:"\u041E\u043F\u0443\u0431\u043B\u0438\u043A\u043E\u0432\u0430\u0442\u044C",SENDING:"\u041F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F..."},zt=5e3,jt=10,Bt=500;var pe=document.querySelector(".big-picture"),$t=pe.querySelector(".big-picture__img img"),An=pe.querySelector(".likes-count"),Ln=pe.querySelector(".social__caption"),Pn=pe.querySelector(".social__comment-shown-count"),Tn=pe.querySelector(".social__comment-total-count"),Kt=pe.querySelector(".social__comments"),it=pe.querySelector(".comments-loader"),ot=[],Re=0,Gt=0,Dn=({avatar:s,message:f,name:E})=>{let b=document.createElement("li");b.classList.add("social__comment"),b.innerHTML='<img class="social__picture"><p class="social__text"></p>';let k=b.querySelector(".social__picture");k.src=s.replace("img/","images/"),k.alt=E,k.width=35,k.height=35;let X=b.querySelector(".social__text");return X.textContent=f,b},kn=()=>{Re<Gt?it.classList.remove("hidden"):it.classList.add("hidden")},Mn=()=>{Pn.textContent=Re},Xt=()=>{let s=document.createDocumentFragment();ot.splice(0,5).forEach(f=>{s.append(Dn(f)),Re++}),Kt.append(s),kn(),Mn()},Wt=({likes:s,comments:f,url:E,description:b})=>{$t.src=`images/${E}`,$t.alt=b,An.textContent=s,Ln.textContent=b,Tn.textContent=f.length,ot.length=0,Re=0,ot.push(...f.slice()),Kt.innerHTML="",Gt=f.length,Xt()};it.addEventListener("click",Xt);var at=document.querySelector(".big-picture"),Yt=at.querySelector(".cancel"),Zt=s=>{at.classList.remove("hidden"),document.body.classList.add("modal-open"),document.addEventListener("keydown",Jt),Wt(s)},lt=()=>{at.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",Jt)};function Jt(s){ae(s)&&(s.preventDefault(),lt())}Yt.addEventListener("click",()=>{lt()});Yt.addEventListener("keydown",s=>{Ut(s)&&lt()});var Qt=document.querySelector(".pictures"),qn=document.querySelector("#picture").content.querySelector(".picture"),ct=[],Vn=()=>{document.querySelectorAll(".picture").forEach(s=>s.remove())},_e=s=>{Vn(),ct.length=0,ct.push(...s.slice());let f=document.createDocumentFragment();s.forEach(({id:E,url:b,description:k,likes:X,comments:J})=>{let te=qn.cloneNode(!0);te.querySelector(".picture__img").src=`images/${b}`,te.querySelector(".picture__img").alt=k,te.querySelector(".picture__likes").textContent=X,te.querySelector(".picture__comments").textContent=J.length,te.dataset.marker=E,f.appendChild(te)}),Qt.append(f)};Qt.addEventListener("click",s=>{let f=s.target.closest(".picture");if(f){let E=Number(f.dataset.marker),b=ct.find(k=>k.id===E);Zt(b)}});var On=document.querySelector("#data-error").content.querySelector(".data-error"),er=()=>{let s=On.cloneNode(!0);document.body.appendChild(s),setTimeout(()=>{s.remove()},zt)};var he=document.querySelector(".img-filters"),Rn=he.querySelector(".img-filters__form"),Fn=he.querySelector("#filter-default"),Un=he.querySelector("#filter-random"),Nn=he.querySelector("#filter-discussed"),tr=()=>{he.classList.remove("img-filters--inactive")},Hn=s=>{he.querySelector(".img-filters__button--active").classList.remove("img-filters__button--active"),s.classList.add("img-filters__button--active")},In=s=>{_e(s)},zn=s=>{let f=[];for(;f.length!==jt;){let E=Ft(s);f.includes(E)||f.push(E)}_e(f)},jn=s=>{let b=s.map(k=>({id:k.id,comments:k.comments.length})).sort((k,X)=>k.comments>X.comments?-1:k.comments<X.comments?1:0).map(k=>s[k.id]);_e(b)},rr=s=>{Rn.addEventListener("click",Nt(f=>{f.target===Fn&&In(s),f.target===Un&&zn(s),f.target===Nn&&jn(s)},Bt))};he.addEventListener("click",s=>{s.target.classList.contains("img-filters__button")&&Hn(s.target)});var nr=s=>{fetch(`${rt}${nt.GET_DATA}`).then(f=>{if(!f.ok)throw new Error;return f.json()}).then(f=>{s(f),tr(),rr(f)}).catch(()=>er())},sr=s=>fetch(`${rt}${nt.SEND_DATA}`,{method:"POST",body:s});var ut=document.querySelector(".img-upload__form"),Fe=ut.querySelector(".text__hashtags"),or=ut.querySelector(".text__description"),be=new Pristine(ut,{classTo:"img-upload__field-wrapper",errorTextParent:"img-upload__field-wrapper",errorTextClass:"img-upload__field-error"}),ft=s=>s.length?Fe.value.toLowerCase().replaceAll(It," ").trim().split(" "):[],$n=s=>ft(s).every(E=>Ht.test(E)),Kn=s=>{let f=ft(s),E=[...new Set(f)];return f.length===E.length},Gn=s=>ft(s).length<=5;be.addValidator(Fe,$n,"\u0425\u044D\u0448\u0442\u0435\u0433 \u0441\u043E\u0441\u0442\u043E\u0438\u0442 \u0438\u0437 \u0431\u0443\u043A\u0432 \u0438 \u0446\u0438\u0444\u0440, \u043C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u0430\u044F \u0434\u043B\u0438\u043D\u0430 20 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432",1,!0);be.addValidator(Fe,Kn,"\u0425\u044D\u0448\u0442\u0435\u0433\u0438 \u043D\u0435 \u043C\u043E\u0433\u0443\u0442 \u043F\u043E\u0432\u0442\u043E\u0440\u044F\u0442\u044C\u0441\u044F",2,!0);be.addValidator(Fe,Gn,"\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u043E \u043D\u0435 \u0431\u043E\u043B\u0435\u0435 \u043F\u044F\u0442\u0438 \u0445\u044D\u0448\u0442\u0435\u0433\u043E\u0432",3,!0);var Xn=()=>or.value.length<=140;be.addValidator(or,Xn,`\u0414\u043B\u0438\u043D\u0430 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u043F\u0440\u0435\u0432\u044B\u0448\u0430\u0442\u044C ${140} \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432`);var ar=()=>be.validate(),lr=()=>{be.reset()};var Ue=document.querySelector(".img-upload__preview-container"),dr=Ue.querySelector(".scale__control--smaller"),mr=Ue.querySelector(".scale__control--bigger"),pr=Ue.querySelector(".scale__control--value"),Yn=Ue.querySelector(".img-upload__preview img"),ce=parseInt(pr.value,10),hr=()=>{dr.disabled=ce<=25,mr.disabled=ce>=100},dt=s=>{pr.value=`${s}%`,Yn.style.transform=`scale(${s/100})`};dr.addEventListener("click",()=>{ce>25&&(ce-=25,dt(ce),hr())});mr.addEventListener("click",()=>{ce<100&&(ce+=25,dt(ce),hr())});var vr=()=>{dt(100)};var xe=document.querySelector(".img-upload__wrapper"),mt=xe.querySelector(".img-upload__preview img"),Zn=xe.querySelector(".effects__list"),Sr=xe.querySelector(".img-upload__effect-level"),Ne=xe.querySelector(".effect-level__slider"),gr=xe.querySelector(".effect-level__value"),Jn=Object.keys(le).map(s=>le[s]),Er=({style:s,max:f,unit:E})=>{mt.style.filter="",mt.style.filter=`${s}(${f}${E})`},pt=()=>{Sr.classList.add("hidden")},Qn=()=>{Sr.classList.remove("hidden")},es=()=>{let s=xe.querySelector(".effects__radio:checked").value;gr.value=Ne.noUiSlider.get(),mt.style.filter=`${le[s].style}(${gr.value}${le[s].unit})`},yr=({max:s,min:f,step:E})=>{noUiSlider.create(Ne,{range:{min:f,max:s},start:s,step:E,connect:"lower",format:{to:b=>Number(b),from:b=>Number(b)}}),Ne.noUiSlider.on("update",es),pt()},ts=({min:s,max:f,step:E})=>{Ne.noUiSlider.updateOptions({range:{min:s,max:f},start:f,step:E})};Zn.addEventListener("change",s=>{let f=Jn.find(E=>E.name===s.target.value);Er(f),ts(f),s.target.value!=="none"?Qn():pt()});var _r=()=>{Er(le.none),pt()};var br=document.querySelector(".img-upload__submit"),rs=document.querySelector("#error").content.querySelector(".error"),ht=rs.cloneNode(!0),ns=document.querySelector("#success").content.querySelector(".success"),vt=ns.cloneNode(!0),xr=(s,f,E)=>{document.removeEventListener("keydown",Pe),document.addEventListener("keydown",k),document.addEventListener("click",X);let b=()=>{s.remove(),document.removeEventListener("click",X),document.removeEventListener("keydown",k),s.classList.contains("error")&&document.addEventListener("keydown",Pe),f.removeEventListener("click",b)};function k(J){ae(J)&&(J.preventDefault(),b())}function X(J){let te=J.target.closest(E);J.target!==te&&b()}f.addEventListener("click",b)},wr=()=>{document.body.appendChild(ht);let s=ht.querySelector(".error__button");xr(ht,s,".error__inner")},Cr=()=>{document.body.appendChild(vt);let s=vt.querySelector(".success__button");xr(vt,s,".success__inner")},gt=(s=!0)=>{br.disabled=s,br.textContent=s?st.SENDING:st.IDLE};var ve=document.querySelector(".img-upload__form"),Ar=ve.querySelector(".img-upload__input"),Lr=ve.querySelector(".img-upload__overlay"),ss=ve.querySelector(".img-upload__cancel"),is=ve.querySelector(".text__hashtags"),os=ve.querySelector(".text__description"),as=()=>{Lr.classList.remove("hidden"),document.body.classList.add("modal-open"),document.addEventListener("keydown",Pe)},St=()=>{Lr.classList.add("hidden"),document.body.classList.remove("modal-open"),Ar.value="",document.removeEventListener("keydown",Pe),lr(),vr(),_r(),ve.reset()};Ar.addEventListener("change",()=>{as()});ss.addEventListener("click",()=>{St()});function Pe(s){ae(s)&&(s.preventDefault(),St())}is.addEventListener("keydown",s=>{ae(s)&&s.stopPropagation()});os.addEventListener("keydown",s=>{ae(s)&&s.stopPropagation()});ve.addEventListener("submit",s=>{if(s.preventDefault(),ar()){gt();let f=new FormData(s.target);sr(f).then(E=>{if(!E.ok)throw new Error;St(),Cr()}).catch(()=>wr()).finally(()=>{gt(!1)})}});yr(le.none);var ls=["jpg","jpeg","png"],Pr=document.querySelector(".img-upload__input"),cs=document.querySelector(".img-upload__preview img"),us=document.querySelectorAll(".effects__preview");Pr.addEventListener("change",()=>{let s=Pr.files[0],f=s.name.toLowerCase();if(ls.some(b=>f.endsWith(b))){let b=URL.createObjectURL(s);cs.src=b,us.forEach(k=>{k.style.backgroundImage=`url(${b})`})}});nr(_e);
/*! nouislider - 15.6.0 - 05/01/2022 */
